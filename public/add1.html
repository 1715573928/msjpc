<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Document</title>
	<link rel="stylesheet" href="css/univ.css">
	<link rel="stylesheet" href="css/add1.css">
	<script src="js/jquery1.min.js" type="text/javascript"></script>
	<script src="plugins/cover_js/iscroll-zoom.js" type="text/javascript" charset="utf-8"></script>
	<script src="plugins/cover_js/hammer.js" type="text/javascript" charset="utf-8"></script>
	<script src="plugins/cover_js/lrz.all.bundle.js" type="text/javascript" charset="utf-8"></script>
	<script src="plugins/cover_js/jquery.photoClip.min.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>
	<div id="headerr">

	</div>
	<div id="body">
		<div style="margin:30px auto;text-align: center;font-size: 20px;">
			<span> 欢迎发布新菜谱，先介绍一下你的大作！</span>
		</div>
		<div class="fb1 bgfff">
			<div class="fbtitle">标题</div>
			<div class="input1"><input id="mtitle" type="text" placeholder="请填写菜谱名称，10字以内" /></div>
			<div class="fbtitle fbsx">属性</div>
			<div class="row1_box">
				<div class="selectitem" style="z-index: 1;">
					<ul>
						<li id="craft" style="border-bottom: 1px;">工艺</li>
						<li class="clearfix">
							<span value="0">选择工艺</span>
							<span value="11">炒</span>
							<span value="12">蒸</span>
							<span value="13">煮</span>
							<span value="14">炖</span>
							<span value="15">拌</span>
							<span value="16">煎</span>
							<span value="17">炸</span>
							<span value="18">烘焙</span>
							<span value="19">烤</span>
							<span value="10">榨汁</span>
							<span value="111">其他</span>
						</li>
					</ul>
				</div>
				<div class="selectitem" style="z-index: 1;">
					<ul>
						<li id="taste" style="border-bottom: 1px;">口味</li>
						<li class="clearfix">
							<span value="0">选择口味</span>
							<span value="21">家常味</span>
							<span value="22">辣味</span>
							<span value="23">鲜味</span>
							<span value="24">甜味</span>
							<span value="25">酸味</span>
							<span value="26">香味</span>
							<span value="27">果味</span>
							<span value="28">怪味</span>
							<span value="29">其他</span>
						</li>
					</ul>
				</div>
				<div class="selectitem" style="z-index: 1;">
					<ul>
						<li id="diffculty" style="border-bottom: 1px;">难度</li>
						<li class="clearfix">
							<span value="0">选择难度</span>
							<span value="31">新手尝试</span>
							<span value="32">初级入门</span>
							<span value="33">初中水平</span>
							<span value="34">中级掌勺</span>
							<span value="35">高级厨师</span>
							<span value="36">厨神级</span>
						</li>
					</ul>
				</div>
				<div class="selectitem" style="z-index: 1;">
					<ul>
						<li id="rtime" style="border-bottom: 1px;">准备时间</li>
						<li class="clearfix">
							<span value="0">选择准备时间</span>
							<span value="41">5分钟</span>
							<span value="42">10分钟</span>
							<span value="43">15分钟</span>
							<span value="44">30分钟</span>
							<span value="45">60分钟</span>
							<span value="46">90分钟</span>
							<span value="47">2小时</span>
							<span value="48">数小时</span>
							<span value="49">一天</span>
							<span value="40">数天</span>
						</li>
					</ul>
				</div>
				<div class="selectitem" style="z-index: 1">
					<ul>
						<li id="ctime" style="border-bottom: 1px;">烹饪时间</li>
						<li class="clearfix">
							<span value="0">选择烹饪时间</span>
							<span value="51">5分钟</span>
							<span value="52">30分钟</span>
							<span value="53">60分钟</span>
							<span value="54">数小时</span>
							<span value="55">一天</span>
							<span value="56">数天</span>
						</li>
					</ul>
				</div>
				<div class="selectitem" style="z-index: 1;">
					<ul>
						<li id="pnum" style="border-bottom: 1px;">人数</li>
						<li class="clearfix">
							<span value="0">选择人数</span>
							<span value="61">1人份</span>
							<span value="62">2人份</span>
							<span value="63">3人份</span>
							<span value="64">4人份</span>
							<span value="65">5人份</span>
							<span value="66">未知</span>
						</li>
					</ul>
				</div>
				<!--上传图片隐藏域-->
				<div class="cover-wrap picuphid">
					<div class="">
						<div id="clipArea" class="pichid1"></div>
						<div class="pichid2">
							<button id="clipBtn" class="pichidbtn">保存封面</button>
						</div>
					</div>
				</div>
				<!--上传图片隐藏域-->
				<div class="fbtitle">成品图(328*440)</div>
				<div id="endp" class="picup picup1">
					<div id="" class="picview" style="background-image: url(img/picup.png);" title="请上传 328*440 的封面图片">
						<input name="img" class="picfile" type="file" id="">
					</div>
				</div>
				<div>
					<div class="selectitem" id="tog1" value="0" style="z-index: 1; margin: 0 0 10px 20px;">

					</div>
					<div class="selectitem" id="tog2" style="z-index: 1;margin: 0 0 10px 20px; display: none;">
						<!--类别标签-->
					</div>
				</div>
				<div class="textareaitem clearb">
					<textarea placeholder="说说这道菜背后的故事吧~ " name="descr" id="story"></textarea>
				</div>

				<div class="clearb"></div>
			</div>
		</div>
		<div style="margin:30px auto;text-align: center;font-size: 20px;">
			<span>记录所有原材料</span>

		</div>
		<div id="footsc" class="fb1 bgfff">
			<div class="upload"><strong>小提示：</strong><br>1、“适量、少许”尽量少用或者不用，用量精确对您的粉丝更有帮助</div>
			<div class="fbtitle">主料</div>
			<div id="material" class="fbsc">
				<div class="input2 fl">
					<input type="text" placeholder="比如：面粉" />
					<input type="text" placeholder="比如：200克" />
					<a></a>
				</div>
				<div class="input2 fl"><input type="text" placeholder="请填写主料名称" /><input type="text" placeholder="请填写用量" />
					<a></a>
				</div>

				<div class="addcsbox clearb">
					<a class="addsc" id="addazl" href="javascript:;">+ 增加一项</a>
				</div>
			</div>
			<div class="fbtitle">辅料</div>
			<div id="acc" class="fbsc">
				<div class="input2 fl"><input type="text" placeholder="比如：食盐" /><input type="text" placeholder="比如：1茶匙" />
					<a></a>
				</div>
				<div class="input2 fl"><input type="text" placeholder="请填写辅料名称" /><input type="text" placeholder="请填写用量" />
					<a></a>
				</div>

				<div class="addcsbox clearb">
					<a class="addsc" id="addafl" href="javascript:;">+ 增加一项</a>
				</div>
			</div>
		</div>
		<div style="margin:30px auto;text-align: center;font-size: 20px;">
			<span>开始写步骤了！能否简单易学就看你怎么写了，加油</span>
		</div>
		<div id="footbz" class="fb1 bgfff">
			<div class="upload">
				<strong>小提示：</strong><br> 1、步骤图宽度在400像素至550像素）
				<br> 2、每个步骤只用一段话描述，请勿在步骤中再细分“1.2.3.”
			</div>
			<div id='step' class="footbzx">


				<div class="addcsbox addcsbox1 clearb">
					<a class="addsc" id="addbz0" href="javascript:;">+ 增加一项</a>
				</div>
				<div class="fbtitle">最终效果图（请上传宽度500-600像素之间的图片）
				</div>
				<div id="finall" class="picup" style="margin-left: 100px;">
					<div id="" class="picview1" style="background-image: url(img/addbz.png);" title="请上传 328*440 的封面图片">
						<input class="picfile1" type="file" id="">
					</div>
				</div>


			</div>
			<div class="fbtitle3 clearb">烹饪小技巧
			</div>
			<div class="textdiv textdivg">
				<textarea id="skill" class="textara textarag" placeholder="请填写步骤描述" name="step_text[]"></textarea>
			</div>
			<div class="clearb"></div>

		</div><input type="button" class="submit_1" value="搞定，提交">
	</div>
	<iframe src="footer.html" frameborder="0"></iframe>
	<script src="js/jquery.min.js"></script>
	<script src="js/header.js"></script>
	<script>
		var data = {};
		var arrm = [];
		var arr1m = [];
		windowy = innerHeight;
		$(".submit_1").click(function () {
			data.mtitle = $("#mtitle").val(); //标题
			if (data.mtitle.length < 1) {
				$('body,html').animate({ scrollTop: $('#mtitle').offset().top - windowy / 2 });
				$('#mtitle').focus();
				return;
			}
			data.craft = $("#craft").val(); //工艺
			if (data.craft < 10) {
				$('body,html').animate({ scrollTop: $('#craft').offset().top - windowy / 2 });
				$('#craft').parent().parent().css("border", "1px solid red");
				return;
			} else {
				data.craft = $("#craft").html();
			}
			data.taste = $("#taste").val(); //口味
			if (data.taste < 10) {
				$('body,html').animate({ scrollTop: $('#taste').offset().top - windowy / 2 });
				$('#taste').parent().parent().css("border", "1px solid red");
				return;
			} else {
				data.taste = $("#taste").html();
			}
			data.diffculty = $("#diffculty").val(); //难度
			if (data.diffculty < 10) {
				$('body,html').animate({ scrollTop: $('#diffculty').offset().top - windowy / 2 });
				$('#diffculty').parent().parent().css("border", "1px solid red");
				return;
			} else {
				data.diffculty = $("#diffculty").html();
			}
			data.rtime = $("#rtime").val(); //准备时间
			if (data.rtime < 10) {
				$('body,html').animate({ scrollTop: $('#rtime').offset().top - windowy / 2 });
				$('#rtime').parent().parent().css("border", "1px solid red");
				return;
			} else {
				data.rtime = $("#rtime").html();
			}
			data.ctime = $("#ctime").val(); //烹饪时间\
			if (data.ctime < 10) {
				$('body,html').animate({ scrollTop: $('#ctime').offset().top - windowy / 2 });
				$('#ctime').parent().parent().css("border", "1px solid red");
				return;
			} else {
				data.ctime = $("#ctime").html();
			}
			data.pnum = $("#pnum").val(); //人数
			if (data.pnum < 10) {
				$('body,html').animate({ scrollTop: $('#pnum').offset().top - windowy / 2 });
				$('#pnum').parent().parent().css("border", "1px solid red");
				return;
			} else {
				data.pnum = $("#pnum").html();
			}
			data.endp = $("#endp").children().css("background-image").slice(5, -2); //成品图
			if (data.endp.length < 100) {
				$('body,html').animate({ scrollTop: $('#endp').offset().top - windowy / 2 });
				$('#endp').css("border", "1px solid red");
				return;
			}
			data.tid = $("#tid").val(); //标签分类
			if (data.tid < 10 || data.tid == undefined) {
				$('body,html').animate({ scrollTop: $('#tog2').offset().top - windowy / 2 });
				$('#tog2').css("border", "1px solid red");
				$('#tog1').css("border", "1px solid red");
				return;
			}

			data.story = $("#story").val(); //故事	
			if (data.story.length < 1) {
				$('body,html').animate({ scrollTop: $('#story').offset().top - windowy / 2 });
				$('#story').focus();
				return;
			}
			$("#material").children(":not(:last)").each(function (i) {
				var arr1m = [];
				arr1m[0] = $(this).children(":first").val();
				arr1m[1] = $(this).children(":eq(1)").val();

				if (arr1m[0].length < 1) {
					$('body,html').animate({ scrollTop: $(this).children(":first").offset().top - windowy / 2 });
					$(this).children(":first").focus();
					return false;
				}
				if (arr1m[1].length < 1) {
					$('body,html').animate({ scrollTop: $(this).children(":eq(1)").offset().top - windowy / 2 });
					$(this).children(":eq(1)").focus();
					return false;
				}

				arrm[i] = arr1m;


			});
			data.material = arrm;//主料
			if (data.material.length < 1) {
				alert("主料缺失")
				return;
			}

			arrm = [];
			$("#acc").children(":not(:last)").each(function (i) {

				arr1m = [];
				arr1m[0] = $(this).children(":first").val();
				//data.acc[i][0]=$(this).children(":first").val();
				//arr1m[i][0]=$(this).children(":first").val();
				arr1m[1] = $(this).children(":eq(1)").val();
				if (arr1m[0].length < 1) {
					$('body,html').animate({ scrollTop: $(this).children(":first").offset().top - windowy / 2 });
					$(this).children(":first").focus();
					return false;
				}
				if (arr1m[1].length < 1) {
					$('body,html').animate({ scrollTop: $(this).children(":eq(1)").offset().top - windowy / 2 });
					$(this).children(":eq(1)").focus();
					return false;
				}
				arrm[i] = arr1m;
			});
			data.acc = arrm;//辅料
			if (data.acc.length < 1) {
				alert("辅料缺失")
				return;
			}

			arrm = [];
			$("#step").children(".footbzx0").each(function (i) {
				arr1m = [];
				arr1m[0] = $(this).children(":first").html();
				arr1m[1] = $(this).children(":eq(1)").children().css("background-image").slice(5, -2);
				arr1m[2] = $(this).children(":last").children(":first").val();


				if (arr1m[1].length < 100) {
					$('body,html').animate({ scrollTop: $(this).children(":eq(1)").children().offset().top - windowy / 2 });
					$(this).children(":eq(1)").css("border", "1px solid red");
					return false;
				}
				if (arr1m[2].length < 1) {
					$('body,html').animate({ scrollTop: $(this).children(":last").children(":first").offset().top - windowy / 2 });
					$(this).children(":last").children(":first").focus();
					return false;
				}
				arrm[i] = arr1m;
				//console.log(typeof(arr1[1]));
			});
			data.step = arrm;//步骤
			if (data.step.length < 1) {
				alert("步骤缺失")
				return;
			}
			data.finall = $("#finall").children().css("background-image").slice(5, -2); //成品图
			if (data.finall.length < 100) {
				$('body,html').animate({ scrollTop: $('#finall').offset().top - windowy / 3 });
				$('#finall').css("border", "1px solid red");
				return;
			}
			data.skill = $("#skill").val();
			//小技巧	
			if (data.skill.length < 1) {
				$('body,html').animate({ scrollTop: $('#skill').offset().top - windowy / 2 });
				$('#skill').focus();
				return;
			}
			data.uid=sessionStorage.getItem("uid");
			console.log(data);
			$.ajax({
				url: "http://localhost:3000/upload",
				type: "post",
				data: data,
				dataType: "json", //自动JSON.parse(),
				success: function (data) {
					window.location.href = "http://127.0.0.1:3000/index.html";
				}
			})//return Promise
			//  onreadystatechange中: 
			//           result <- 收到服务端的
			//  然后把result放入
			//              ↓
			//      open(result)
			//              ↓
			// .then(function (res) {

			// 	if(res.code==200){	
			// 		alert(res.code);
			// 		window.location.href = 'http://www.baidu.com/';
			// 	}
			// })
		})



		var arr0 = ['家常菜谱', '中华菜系', '各地小吃', '国外菜谱', '烘焙  ']
		var arr1 = [
			[
				[16, '家常菜'],
				[17, '凉菜'],
				[18, '素食'],
				[19, '晚餐'],
				[20, '私家菜'],
				[21, '热菜'],
				[22, '海鲜'],
				[23, '孕妇'],
				[24, '早餐'],
				[25, '午餐'],
				[26, '甜品点心'],
				[27, '汤粥'],
				[28, '糕点'],
				[29, '主食'],
				[30, '微波炉']
			],
			[
				[31, '川菜'],
				[32, '粤菜'],
				[33, '东北菜'],
				[34, '湘菜'],
				[35, '鲁菜'],
				[36, '浙菜'],
				[37, '湖北菜'],
				[38, '清真菜']
			],
			[
				[39, '四川小吃'],
				[40, '广东小吃'],
				[41, '北京小吃'],
				[42, '陕西小吃']
			],
			[
				[43, '韩国料理'],
				[44, '日本料理'],
				[45, '法国菜'],
				[46, '意大利餐']
			],
			[
				[47, '蛋糕'],
				[48, '面包'],
				[49, '饼干配方'],
				[50, '甜品'],
				[51, '点心']
			]
		]
		var b = 1;
		var htm = `<ul><li style="border-bottom: 1px;">菜谱分类</li><li class="clearfix"><span value="-1">选择工艺</span>`;
		for (var i = 0; i < arr0.length; i++) {
			htm += `<span value="${i}">${arr0[i]}</span>`;
		}
		htm += "</li></ul>";
		$("#tog1").html(htm).on("click", "span", function () {
			var o = $(this).attr("value");

			if (o != -1) {
				var htm = `<ul><li id="tid" value="1" style="border-bottom: 1px;">菜谱分类</li><li class="clearfix"><span value="-1">选择工艺</span>`;
				for (var i = 0; i < arr1[o].length; i++) {
					htm += `<span value="${arr1[o][i][0]}">${arr1[o][i][1]}</span>`;
				}
				htm += "</li></ul>";
				$("#tog2").html(htm);
				$("#tog2").children().children(":last").css("display", "none");

				$("#tog2").show();
			} else
				$("#tog2").hide();
			$("#tog2").children().hover(function () {
				$(this).children().next().css("display", "block");

				$(this).css("z-index", 200)
			}, function () {

				$(this).children().next().css("display", "none");
				$(this).css("z-index", 1)
			})
		});

		$(".selectitem ul").hover(function () {
			var $li = $(this);
			$li.children("li:last-child").css("display", "block");
			$li.parent().css("z-index", 200)
		}, function () {
			var $li = $(this);
			$li.children("li:last-child").css("display", "none");
			$li.parent().css("z-index", 1)
		})
		$(".row1_box").on("click", "span", function () {
			var $span = $(this);
			$span.parent().prev().html($span.html());
			$span.parent().prev().attr("value", $span.attr("value"));
			$span.parent().css("display", "none");
			$span.parent().parent().parent().css("border", "1px solid #ddd");
		})

		function addcl(t) {
			$(`<div class="input2 fl"><input type="text" placeholder="请填写主料名称" /><input type="text" placeholder="请填写用量" /> <a></a></div>`).insertBefore($(t).parent());
		}
		$("#addazl").click(function () {
			addcl(this);
		}).parent().parent().on("click", ".input2>a", function () {
			$(this).parent().remove();
		})
		$("#addafl").click(function () {
			addcl(this);
		}).parent().parent().on("click", ".input2>a", function () {
			$(this).parent().remove();
		})
		//			var html1 = `<div class="footbzx0">
		//					<div class="footbzx1 fl">${b}</div>
		//					<div class="picup">
		//						<div id="" class="picview1" style="background-image: url(img/addbz.png);" title="请上传 500*500 的封面图片">
		//							<input class="picfile1" type="file" id="">
		//						</div>
		//					</div>
		//					<div class="textdiv">
		//						<textarea class="textara" placeholder="请填写步骤描述" value="" name="step_text[]"></textarea>
		//						<div class="srightbtn fr dispn">
		//							
		//							<a href="####" class="addStep"></a>
		//							<a href="####" class="delStep"></a>
		//						</div>
		//					</div>
		//				</div>`;
		//			
		$("#addbz0").click(function () {
			$(`<div class="footbzx0">
					<div class="footbzx1 fl">${b}</div>
					<div class="picup">
						<div id="" class="picview1" style="background-image: url(img/addbz.png);" title="请上传 500*500 的封面图片">
							<input class="picfile1" type="file" id="">
						</div>
					</div>
					<div class="textdiv">
						<textarea class="textara" placeholder="请填写步骤描述" value="" name="step_text[]"></textarea>
						<div class="srightbtn fr dispn">
							
							<a href="####" class="addStep"></a>
							<a href="####" class="delStep"></a>
						</div>
					</div>
				</div>`).insertBefore($(this).parent());
			$(".textdiv").hover(function () {
				$(this).children("div").show();
			},
				function () {
					$(this).children("div").hide();
				});

			b++;

		})
		$(".footbzx").on("click", ".delStep", function () {
			alert(1111);
			var y = $(this).parent().parent().parent().nextAll();
			$(this).parent().parent().parent().remove();

			console.log(y);
			$.each(y, function (i, n) {
				console.log(n);
				if (i >= 0)
					$(n).children(".footbzx1").html(parseInt($(n).children(".footbzx1").html()) - 1)
			});
			b--;

		})
		$(".footbzx").on("click", ".addStep", function () {
			alert(222);
			var g = parseInt($(this).parent().parent().parent().children(".footbzx1").html());
			$(`<div class="footbzx0">
					<div class="footbzx1 fl">${g + 1}</div>
					<div class="picup">
						<div id="" class="picview1" style="background-image: url(img/addbz.png);" title="请上传 500*500 的封面图片">
							<input class="picfile1" type="file" id="">
						</div>
					</div>
					<div class="textdiv">
						<textarea class="textara" placeholder="请填写步骤描述" value="" name="step_text[]"></textarea>
						<div class="srightbtn fr dispn">
							
							<a href="####" class="addStep"></a>
							<a href="####" class="delStep"></a>
						</div>
					</div>
				</div>`).insertAfter($(this).parent().parent().parent());
			$(".textdiv").hover(function () {
				$(this).children("div").show();
			},
				function () {
					$(this).children("div").hide();
				});

			var y = $(this).parent().parent().parent().nextAll();
			$.each(y, function (i, n) {
				console.log(n);
				if (i > 0)
					$(n).children(".footbzx1").html(parseInt($(n).children(".footbzx1").html()) + 1)
			});
			b++;

		})
		for (; b < 3;) {

			$("#addbz0").click();
		}
			//			$(".footbzx").on("click", ".moveDown", function() {
			//
			//				var a = $(this).parent().parent().parent().html();
			//				var b = $(this).parent().parent().parent().next().html();
			//
			//				$(`<div class="footbzx0">${b}</div>`).replaceAll($(this).parent().parent().parent());
			//				$(`<div class="footbzx0">${a}</div>`).insertAfter($(this).parent().parent().parent());
			//			})
			//$(`<div class="footbzx0">${a}</div>`).insertAfter($(this).parent().parent().parent());
			//   		$(`<h1>aaaa</h1>`).replaceAll($(this).parent().parent().parent());
			//			$(`<h1>aabbbbaa</h1>`).replaceAll($(this).parent().parent().parent().next());
			//			

			//	console.log("a______________"+a);console.log("b____________"+b);
	</script>
	<script type="text/javascript">
		//上传封面
		var uid = 0;
		$(".picup1").click(function () {
			uid++;
			var arr = [328, 440];
			//var  clipArea='#clipArea'+uid;
			var filee = 'file' + uid;
			var view = 'view' + uid;
			$(this).children().attr("id", view).children().attr("id", filee);
			$(this).css("border", "none");
			//alert(arr);
			//var  clipBtn='#clipBtn'+uid;
			picsc5(arr, filee, view);

		})
		$(".footbzx").on("click", ".picup", function () {
			uid++;
			var arr = [500, 500];
			//var  clipArea='#clipArea'+uid;
			var filee = 'file' + uid;
			var view = 'view' + uid;
			$(this).children().attr("id", view).children().attr("id", filee);
			$(this).css("border", "none");
			//var  clipBtn='#clipBtn'+uid;

			picsc5(arr, filee, view);
		})

		function picsc5(arr, filee, view) {

			//document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);		
			var clipArea = new bjj.PhotoClip("#clipArea", {
				size: arr, // 截取框的宽和高组成的数组。默认值为[260,260]
				outputSize: arr, // 输出图像的宽和高组成的数组。默认值为[0,0]，表示输出图像原始大小
				//outputType: "jpg", // 指定输出图片的类型，可选 "jpg" 和 "png" 两种种类型，默认为 "jpg"
				file: "#" + filee, // 上传图片的<input type="file">控件的选择器或者DOM对象
				view: "#" + view, // 显示截取后图像的容器的选择器或者DOM对象
				ok: "#clipBtn", // 确认截图按钮的选择器或者DOM对象
				loadStart: function () {
					// 开始加载的回调函数。this指向 fileReader 对象，并将正在加载的 file 对象作为参数传入
					$('.cover-wrap').fadeIn();
					console.log("照片读取中");
				},
				loadComplete: function () {
					// 加载完成的回调函数。this指向图片对象，并将图片地址作为参数传入
					console.log("照片读取完成");
				},
				//loadError: function(event) {}, // 加载失败的回调函数。this指向 fileReader 对象，并将错误事件的 event 对象作为参数传入
				clipFinish: function (dataURL) {
					// 裁剪完成的回调函数。this指向图片对象，会将裁剪出的图像数据DataURL作为参数传入
					$('.cover-wrap').fadeOut();
					$("#" + view).css('background-size', '100% 100%');
					dataURL111 = dataURL;
					console.log(dataURL);
				}
			});
		}
			//clipArea.destroy();
	</script>

</body>

</html>